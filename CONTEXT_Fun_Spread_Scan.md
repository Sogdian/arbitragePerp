# CONTEXT: –§–∞–Ω–¥–∏–Ω–≥-–∞—Ä–±–∏—Ç—Ä–∞–∂ –º–µ–∂–¥—É –±–∏—Ä–∂–∞–º–∏ (scan_fundings_spreads.py)

## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å **`scan_fundings_spreads.py`** ‚Äî –±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–∞—Ä –±–∏—Ä–∂ –∏ –º–æ–Ω–µ—Ç –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ñ–∞–Ω–¥–∏–Ω–≥-–∞—Ä–±–∏—Ç—Ä–∞–∂–∞ –º–µ–∂–¥—É –¥–≤—É–º—è –±–∏—Ä–∂–∞–º–∏. –û–Ω —Ç–æ–ª—å–∫–æ **–º–æ–Ω–∏—Ç–æ—Ä–∏—Ç** –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ —à–ª—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å –∏ Telegram; –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ.

---

## 1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ñ–∞–Ω–¥–∏–Ω–≥-–∞—Ä–±–∏—Ç—Ä–∞–∂–∞

### –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

- **–ë–∏—Ä–∂–∞ 1 (Long):** —Ñ–∞–Ω–¥–∏–Ω–≥ —Å–∏–ª—å–Ω–æ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä ‚àí2%). –í –ª–æ–Ω–≥–µ –º—ã **–ø–æ–ª—É—á–∞–µ–º** —Ñ–∞–Ω–¥–∏–Ω–≥ –æ—Ç —à–æ—Ä—Ç–∏—Å—Ç–æ–≤.
- **–ë–∏—Ä–∂–∞ 2 (Short):** —Ñ–∞–Ω–¥–∏–Ω–≥ –æ—Ç 0 –¥–æ ~0.5% ‚Äî —Ö–µ–¥–∂; –≤ —à–æ—Ä—Ç–µ –º—ã **–ø–ª–∞—Ç–∏–º** –Ω–µ –±–æ–ª—å—à–µ ~0.5%.
- –ó–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –¥–æ –≤—ã–ø–ª–∞—Ç—ã —Ñ–∞–Ω–¥–∏–Ω–≥–∞ –Ω–∞ –±–∏—Ä–∂–µ 1 –≤—Ö–æ–¥–∏–º –≤ **Long** –Ω–∞ –±–∏—Ä–∂–µ 1 –∏ –≤ **Short** –Ω–∞ –±–∏—Ä–∂–µ 2.
- –í –º–æ–º–µ–Ω—Ç –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ –±–∏—Ä–∂–µ 1 –ø–æ–ª—É—á–∞–µ–º —Ñ–∞–Ω–¥–∏–Ω–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä ‚àí2%), –Ω–∞ –±–∏—Ä–∂–µ 2 –ø–ª–∞—Ç–∏–º –æ—Ç 0 –¥–æ 0.5%.
- –ü–æ—Å–ª–µ –≤—ã–ø–ª–∞—Ç—ã –∑–∞–∫—Ä—ã–≤–∞–µ–º –æ–±–µ –ø–æ–∑–∏—Ü–∏–∏.

### –î–µ—Ç–∞–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–Ω–¥–∏–Ω–≥–æ–≤** ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –Ω–∞ –¥–≤—É—Ö –±–∏—Ä–∂–∞—Ö. –ï—Å–ª–∏ —Ñ–∞–Ω–¥–∏–Ω–≥–∏ –º–µ–Ω—è—é—Ç—Å—è –∏ —Å–¥–µ–ª–∫–∞ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ–π, –±–æ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç, —á—Ç–æ–±—ã –Ω–µ –≤—Ö–æ–¥–∏—Ç—å.
2. **–°–ø—Ä–µ–¥ —Ü–µ–Ω** ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã —Å–ø—Ä–µ–¥ —Ü–µ–Ω –º–µ–∂–¥—É –±–∏—Ä–∂–∞–º–∏ –±—ã–ª –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º. –í—Ö–æ–¥ –∏ –≤—ã—Ö–æ–¥ ‚Äî –≤ –º–æ–º–µ–Ω—Ç—ã –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–µ–¥–∞; —Å–¥–µ–ª–∫–∏ –ª–∏–º–∏—Ç–Ω—ã–º–∏ –æ—Ä–¥–µ—Ä–∞–º–∏.
3. **–§–æ—Ä–º—É–ª–∞ —Å–ø—Ä–µ–¥–∞ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ (–Ω–∞—à–∞ –≤—ã–≥–æ–¥–∞):**  
   –ø–æ–ª—É—á–∞–µ–º –Ω–∞ Long (–ø—Ä–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–º rate ‚Äî –º–æ–¥—É–ª—å) ‚àí –ø–ª–∞—Ç–∏–º –Ω–∞ Short (–º–æ–¥—É–ª—å rate) –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö.  
   –ü—Ä–∏–º–µ—Ä—ã: Long ‚àí2%, Short +0.5% ‚Üí –§–∞–Ω–¥ = 2% ‚àí 0.5% = **1.5%**; Long ‚àí2%, Short ‚àí0.23% ‚Üí –§–∞–Ω–¥ = 2% ‚àí 0.23% = **1.77%**.

---

## 2. –ë–æ—Ç scan_fundings_spreads.py

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- –ù–∞—Ö–æ–¥–∏—Ç—å –ø–∞—Ä—ã **(–±–∏—Ä–∂–∞ Long, –±–∏—Ä–∂–∞ Short)** –∏ –º–æ–Ω–µ—Ç—ã: –ø–µ—Ä–≤–∏—á–Ω—ã–π –æ—Ç–±–æ—Ä ‚Äî –ø–æ —Ñ–∞–Ω–¥–∏–Ω–≥—É –Ω–∞ Long (**‚â§ MIN_FUNDING_LONG_FILTER_FOR_LOG**); –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å–ø—Ä–µ–¥ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ **‚â• MIN_FUNDING_SPREAD**, —Å–ø—Ä–µ–¥ —Ü–µ–Ω –ø–æ –º–æ–¥—É–ª—é **‚â§ MAX_PRICE_SPREAD** –∏ –≤—Ä–µ–º—è –¥–æ –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ Long.
- –ü—Ä–æ–≤–æ–¥–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –∏ –Ω–æ–≤–æ—Å—Ç–µ–π (–¥–µ–ª–∏—Å—Ç–∏–Ω–≥, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å) –∏ –≤—ã–≤–æ–¥–∏—Ç—å –≤–µ—Ä–¥–∏–∫—Ç: ‚úÖ –∞—Ä–±–∏—Ç—Ä–∞–∂–∏—Ç—å / ‚ùå –Ω–µ –∞—Ä–±–∏—Ç—Ä–∞–∂–∏—Ç—å.
- –ü–∏—Å–∞—Ç—å –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –≤ **–∫–æ–Ω—Å–æ–ª—å** –Ω–∞ –∫–∞–∂–¥—É—é –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø–∞—Ä—É (–±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª).
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ **Telegram** –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –º–æ–Ω–µ—Ç—É (–∫–∞—Ä—Ç–∏–Ω–∫–∞-—Ç–∞–±–ª–∏—Ü–∞ + –ø–æ–¥–ø–∏—Å—å), —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ **–≤—Ä–µ–º—è –¥–æ –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ Long –±–∏—Ä–∂–µ** **< SCAN_FUNDING_MIN_TIME_TO_PAY** –º–∏–Ω—É—Ç (–≥–ª–∞–≤–Ω–∞—è –±–∏—Ä–∂–∞ ‚Äî –ª–æ–Ω–≥, –Ω—É–∂–Ω–∞ –≤—ã–ø–ª–∞—Ç–∞ –Ω–∞ –ª–æ–Ω–≥ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è).

### –£—Å–ª–æ–≤–∏—è –æ—Ç–±–æ—Ä–∞ –ø–∞—Ä

**–í process_coin (–ø–µ—Ä–≤–∏—á–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä):** –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç—ã –ø–µ—Ä–µ–±–∏—Ä–∞—é—Ç—Å—è –ø–∞—Ä—ã –±–∏—Ä–∂ `(ex1, ex2)` –∏–∑ –±–∏—Ä–∂ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ bid/ask. –í –ª–æ–≥ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å–≤—è–∑–∫–∏, –≥–¥–µ **—Ñ–∞–Ω–¥–∏–Ω–≥ –Ω–∞ –±–∏—Ä–∂–µ Long (–≤ %) ‚â§ MIN_FUNDING_LONG_FILTER_FOR_LOG** (–Ω–∞–ø—Ä–∏–º–µ—Ä ‚àí0.5: –ø—Ä–æ—Ö–æ–¥—è—Ç ‚àí1%, ‚àí1.5%; –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚àí0.4%, 0%, +1%):

- **Long –Ω–∞ ex1, Short –Ω–∞ ex2:** –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è, –µ—Å–ª–∏ `funding_rate(ex1) * 100 <= MIN_FUNDING_LONG_FILTER_FOR_LOG`.
- **Long –Ω–∞ ex2, Short –Ω–∞ ex1:** –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è, –µ—Å–ª–∏ `funding_rate(ex2) * 100 <= MIN_FUNDING_LONG_FILTER_FOR_LOG`.

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ **–Ω–µ** –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è MIN_FUNDING_SPREAD –∏ MAX_PRICE_SPREAD ‚Äî –æ–Ω–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ **\_analyze_and_log_opportunity**.

**–í _analyze_and_log_opportunity** –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–∫–æ–π –ø–∞—Ä—ã **—Å–Ω–∞—á–∞–ª–∞** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞–Ω–Ω—è—è –æ—Ç—Å–µ—á–∫–∞ (–±–µ–∑ –≤—ã–∑–æ–≤–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –∏ –Ω–æ–≤–æ—Å—Ç–µ–π). –ü—Ä–∏ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ ‚Äî –ª–æ–≥ —Å –ø—Ä–∏—á–∏–Ω–æ–π –∏ –≤—ã—Ö–æ–¥ (–±–µ–∑ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –∏ –Ω–æ–≤–æ—Å—Ç–µ–π).

**–†–∞–Ω–Ω—è—è –æ—Ç—Å–µ—á–∫–∞ (–ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫):**

1. **–°–ø—Ä–µ–¥ —Ü–µ–Ω (–¥–∞–Ω–Ω—ã–µ)** ‚Äî –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ (open_spread_pct –Ω–µ None). –ò–Ω–∞—á–µ –≤ –ª–æ–≥: ¬´—Å–ø—Ä–µ–¥ —Ü–µ–Ω: –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö¬ª.
2. **–¶–µ–Ω–∞ Long –Ω–∏–∂–µ, —á–µ–º Short** ‚Äî ask_long < bid_short (—Ü–µ–Ω–∞ –Ω–∞ Long –±–∏—Ä–∂–µ –Ω–∏–∂–µ, —á–µ–º –Ω–∞ Short). –ò–Ω–∞—á–µ –≤ –ª–æ–≥: ¬´—Ü–µ–Ω–∞ –Ω–∞ Long –≤—ã—à–µ —á–µ–º –Ω–∞ Short¬ª.
3. **–°–ø—Ä–µ–¥ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ (–¥–∞–Ω–Ω—ã–µ)** ‚Äî –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ (funding_spread_val –Ω–µ None). –ò–Ω–∞—á–µ –≤ –ª–æ–≥: ¬´—Ñ–∞–Ω–¥–∏–Ω–≥: –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö¬ª.
4. **–°–ø—Ä–µ–¥ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ (–ø–æ—Ä–æ–≥)** ‚Äî funding_spread_val ‚â• MIN_FUNDING_SPREAD. –ò–Ω–∞—á–µ –≤ –ª–æ–≥: ¬´—Ñ–∞–Ω–¥–∏–Ω–≥ X% < Y%¬ª.
5. **–í—Ä–µ–º—è –¥–æ –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ Long** ‚Äî m_long < SCAN_FUNDING_MIN_TIME_TO_PAY. –ò–Ω–∞—á–µ –≤ –ª–æ–≥: ¬´–≤—Ä–µ–º—è –≤—ã–ø–ª. –Ω–∞ Long X –º–∏–Ω >= Y –º–∏–Ω¬ª.

–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Å–µ –ø—è—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω—ã, –≤—ã–∑—ã–≤–∞—é—Ç—Å—è **check_liquidity** –∏ **_get_news_cached**; –∑–∞—Ç–µ–º –≤—ã–Ω–æ—Å–∏—Ç—Å—è –≤–µ—Ä–¥–∏–∫—Ç ‚úÖ/‚ùå –∏ –ø–∏—à–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –ª–æ–≥. –†–∞–Ω–Ω—è—è –æ—Ç—Å–µ—á–∫–∞ —ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø–∞—Ä–∞—Ö.

### –§–æ—Ä–º—É–ª—ã

| –í–µ–ª–∏—á–∏–Ω–∞ | –§–æ—Ä–º—É–ª–∞ |
|----------|---------|
| –°–ø—Ä–µ–¥ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ (%), –Ω–∞—à–∞ –≤—ã–≥–æ–¥–∞ | –ø–æ–ª—É—á–∞–µ–º –Ω–∞ Long ‚àí –ø–ª–∞—Ç–∏–º –Ω–∞ Short: `(receive_long - pay_short) * 100`, –≥–¥–µ receive_long = ‚àífunding_long –ø—Ä–∏ funding_long < 0, pay_short = \|funding_short\| |
| –°–ø—Ä–µ–¥ –ø–æ —Ü–µ–Ω–µ (%) | `(bid_short - ask_long) / ask_long * 100` |
| –û–±—â–∏–π —Å–ø—Ä–µ–¥ (%) | `spread_price + spread_funding` |

–ü—Ä–∏–º–µ—Ä: Long ‚àí2%, Short +0.5% ‚Üí —Å–ø—Ä–µ–¥ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ 1.5%. –°–ø—Ä–µ–¥ –ø–æ —Ü–µ–Ω–µ 0.8% ‚Üí –æ–±—â–∏–π —Å–ø—Ä–µ–¥ 2.3%.

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **–°–±–æ—Ä –º–æ–Ω–µ—Ç:** `collect_coins_by_exchange` ‚Äî —Å–ø–∏—Å–æ–∫ —Ñ—å—é—á–µ—Ä—Å–Ω—ã—Ö –º–æ–Ω–µ—Ç –ø–æ –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–µ (union, –±–µ–∑ EXCLUDE_COINS –∏ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤).
2. **Fetch –ø–æ –º–æ–Ω–µ—Ç–µ:** –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏, –≥–¥–µ –µ—Å—Ç—å –º–æ–Ω–µ—Ç–∞, –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è:
   - —Ç–∏–∫–µ—Ä (`get_futures_ticker`) ‚Äî bid, ask, price;
   - —Ñ–∞–Ω–¥–∏–Ω–≥ (`get_funding_info` –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏, –∏–Ω–∞—á–µ `get_funding_rate`) ‚Äî `funding_rate`, `next_funding_time` (–¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –º–∏–Ω—É—Ç –¥–æ –≤—ã–ø–ª–∞—Ç—ã).
3. **–§–∏–ª—å—Ç—Ä –ø–∞—Ä (process_coin):** –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –±–∏—Ä–∂ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–≤—è–∑–∫–∏, –≥–¥–µ **—Ñ–∞–Ω–¥–∏–Ω–≥ –Ω–∞ –±–∏—Ä–∂–µ Long (–≤ %) ‚â§ MIN_FUNDING_LONG_FILTER_FOR_LOG**. –°–ø—Ä–µ–¥ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ –∏ —Å–ø—Ä–µ–¥ —Ü–µ–Ω –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è.
4. **–ê–Ω–∞–ª–∏–∑:** –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–∫–æ–π –ø–∞—Ä—ã –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `_analyze_and_log_opportunity`:
   - **–†–∞–Ω–Ω—è—è –æ—Ç—Å–µ—á–∫–∞:** –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–ø—Ä–µ–¥—É —Ü–µ–Ω; –ø—Ä–∞–≤–∏–ª–æ ¬´—Ü–µ–Ω–∞ –Ω–∞ Long –Ω–∏–∂–µ —á–µ–º –Ω–∞ Short¬ª (ask_long < bid_short); –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ—Ä–æ–≥ –ø–æ —Ñ–∞–Ω–¥–∏–Ω–≥—É; –≤—Ä–µ–º—è –¥–æ –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ Long. –ü—Ä–∏ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ ‚Äî –ª–æ–≥ —Å –ø—Ä–∏—á–∏–Ω–æ–π –∏ –≤—ã—Ö–æ–¥ **–±–µ–∑** –≤—ã–∑–æ–≤–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –∏ –Ω–æ–≤–æ—Å—Ç–µ–π.
   - –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–Ω–Ω–µ–π –æ—Ç—Å–µ—á–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã: –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å (`check_liquidity` –¥–ª—è Long –∏ Short), –Ω–æ–≤–æ—Å—Ç–∏ (–∫–µ—à –ø–æ `(coin, exchange)`; –¥–µ–ª–∏—Å—Ç–∏–Ω–≥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ –æ–±–µ–∏–º –±–∏—Ä–∂–∞–º), –∑–∞—Ç–µ–º –≤–µ—Ä–¥–∏–∫—Ç –∏ –ª–æ–≥.
5. **–õ–æ–≥:** –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –ø–∞—Ä—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
   - `{COIN} Long (ex1), Short (ex2) –°–ø—Ä–µ–¥ —Ü–µ–Ω: X.XXX% | –§–∞–Ω–¥: Y.YYY% (L: A –º–∏–Ω | S: B –º–∏–Ω) | –û–±—â–∏–π: Z.ZZZ% ‚úÖ –∞—Ä–±–∏—Ç. / ‚ùå –Ω–µ –∞—Ä–±–∏—Ç. (–ø—Ä–∏—á–∏–Ω–∞ –∏–ª–∏ –∫–æ–ª-–≤–æ –º–æ–Ω–µ—Ç)`.
   - L/S ‚Äî –≤—Ä–µ–º—è –¥–æ –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ –±–∏—Ä–∂–µ Long –∏ Short; –ø—Ä–∏ —Ä–∞–Ω–Ω–µ–π –æ—Ç—Å–µ—á–∫–µ –≤ —Å–∫–æ–±–∫–∞—Ö —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ (—Å–ø—Ä–µ–¥ —Ü–µ–Ω—ã, —Ñ–∞–Ω–¥–∏–Ω–≥, –≤—Ä–µ–º—è –≤—ã–ø–ª.).
   - –í –∫–æ–Ω—Ü–µ —Ü–∏–∫–ª–∞: ¬´–¶–∏–∫–ª: –ø–∞—Ä –Ω–∞ –∞–Ω–∞–ª–∏–∑ 0 (...)¬ª –∏–ª–∏ ¬´–¶–∏–∫–ª: –ø–∞—Ä –Ω–∞ –∞–Ω–∞–ª–∏–∑ (—Å –≤–µ—Ä–¥–∏–∫—Ç–∞–º–∏): N¬ª. –í –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ü–∏–∫–ª–∞ –≤ Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è ¬´üîÑ –ù–æ–≤—ã–π —Ü–∏–∫–ª –ø–æ–∏—Å–∫–∞ —Å–ø—Ä–µ–¥–∞ —Ñ–∞–Ω–¥–∏–Ω–≥–æ–≤¬ª.
6. **Telegram:** —Å—Ä–µ–¥–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Å –≤–µ—Ä–¥–∏–∫—Ç–æ–º ‚úÖ –æ—Ç–±–∏—Ä–∞—é—Ç—Å—è —Ç–µ, —É –∫–æ—Ç–æ—Ä—ã—Ö **–≤—Ä–µ–º—è –¥–æ –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ Long –±–∏—Ä–∂–µ** **< SCAN_FUNDING_MIN_TIME_TO_PAY**. –ü–æ –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç–µ ‚Äî –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: –∫–∞—Ä—Ç–∏–Ω–∫–∞-—Ç–∞–±–ª–∏—Ü–∞ + –ø–æ–¥–ø–∏—Å—å (–Ω–∞ —Ä—É—Å—Å–∫–æ–º); –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ PIL ‚Äî —Ç–µ–∫—Å—Ç `_format_combined_telegram_message`. –°—Å—ã–ª–∫–∏ –Ω–∞ –±–∏—Ä–∂–∏: OKX ‚Äî `ru/trade-swap/{coin}-usdt-swap`.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –°–º—ã—Å–ª | –ü—Ä–∏–º–µ—Ä |
|------------|--------|--------|
| **MIN_FUNDING_SPREAD** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–ø—Ä–µ–¥ —Ñ–∞–Ω–¥–∏–Ω–≥–∞ (%), –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ —Ä–∞–Ω–Ω–µ–π –æ—Ç—Å–µ—á–∫–µ; –Ω–∏–∂–µ ‚Äî ¬´–Ω–µ –∞—Ä–±–∏—Ç¬ª | 1.5, 2 |
| **MIN_FUNDING_LONG_FILTER_FOR_LOG** | –ü–µ—Ä–≤–∏—á–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –≤ process_coin: –≤ –ª–æ–≥ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å–≤—è–∑–∫–∏, –≥–¥–µ —Ñ–∞–Ω–¥–∏–Ω–≥ –Ω–∞ Long (–≤ %) ‚â§ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (–æ—Ç—Ä–∏—Ü. = –ø–æ–ª—É—á–∞–µ–º –Ω–∞ –ª–æ–Ω–≥) | ‚àí0.5 |
| **MAX_PRICE_SPREAD** | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–æ–ø—É—Å—Ç–∏–º—ã–π —Å–ø—Ä–µ–¥ —Ü–µ–Ω –ø–æ –º–æ–¥—É–ª—é (%), –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ —Ä–∞–Ω–Ω–µ–π –æ—Ç—Å–µ—á–∫–µ | 0.5, 1.5, 2 |
| **SCAN_FUNDING_MIN_TIME_TO_PAY** | –ü–æ—Ä–æ–≥ –º–∏–Ω—É—Ç –¥–æ –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ Long: —Ä–∞–Ω–Ω—è—è –æ—Ç—Å–µ—á–∫–∞ –µ—Å–ª–∏ L ‚â• —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è; –≤ Telegram —à–ª—ë–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ L < —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è | 60 |
| **SCAN_FUNDING_INTERVAL_SEC** | –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–µ–∫) | 60 |
| **SCAN_FUNDING_MAX_CONCURRENCY** | –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ | 20 |
| **SCAN_FUNDING_COIN_BATCH_SIZE** | –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –º–æ–Ω–µ—Ç –∑–∞ –ø—Ä–æ—Ö–æ–¥ | 50 |
| **SCAN_FUNDING_REQ_TIMEOUT_SEC** | –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫) | 20 |
| **SCAN_FUNDING_MEXC_REQ_TIMEOUT_SEC** | –¢–∞–π–º–∞—É—Ç –¥–ª—è MEXC (—Å–µ–∫) | 45 |
| **SCAN_COIN_INVEST** | –û–±—ä—ë–º –≤ USDT –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –∏ —Ä–∞—Å—á—ë—Ç–∞ –∫–æ–ª-–≤–∞ –º–æ–Ω–µ—Ç | 50 |
| **SCAN_NEWS_CACHE_TTL_SEC** | TTL –∫–µ—à–∞ –Ω–æ–≤–æ—Å—Ç–µ–π (—Å–µ–∫) | 180 |
| **SCAN_ANALYSIS_MAX_CONCURRENCY** | –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –∞–Ω–∞–ª–∏–∑–∞ (–ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å + –Ω–æ–≤–æ—Å—Ç–∏) | 2 |
| **EXCLUDE_COINS** | –ú–æ–Ω–µ—Ç—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è | FLOW,BTC |
| **EXCLUDE_EXCHANGES** | –í –∫–æ–¥–µ –∑–∞—à–∏—Ç–æ `{"lbank"}` | ‚Äî |

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–∞–∫–∂–µ **config** (TEST_CHANNEL_ID, BOT_TOKEN, ENABLE_TELEGRAM –∏ —Ç.–¥.) –∏ –æ–±—â–∏–π **PerpArbitrageBot** (–±–∏—Ä–∂–∏, news_monitor, announcements_monitor, x_news_monitor).

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –¢–æ–ª—å–∫–æ –∫–æ–Ω—Å–æ–ª—å (StreamHandler), **–±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª**.
- –§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏: `%(asctime)s - %(message)s` (—É—Ä–æ–≤–µ–Ω—å –∏ –∏–º—è –ª–æ–≥–≥–µ—Ä–∞ –≤ –≤—ã–≤–æ–¥ –Ω–µ –≤—ã–≤–æ–¥—è—Ç—Å—è).
- –ò–º—è –ª–æ–≥–≥–µ—Ä–∞: `scan_fundings_spreads`.
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –æ—Ç httpx, bot, news_monitor, exchanges –∏ —Ç.–¥. –∑–∞–≥–ª—É—à–µ–Ω—ã (WARNING/CRITICAL).

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **bot.PerpArbitrageBot** ‚Äî –±–∏—Ä–∂–∏, –Ω–æ–≤–æ—Å—Ç–∏.
- **telegram_sender.TelegramSender** ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∫–∞–Ω–∞–ª (TEST_CHANNEL_ID).
- **config** ‚Äî ENV_MODE, TEST_CHANNEL_ID –∏ –¥—Ä.
- –ë–∏—Ä–∂–∏ —Å –º–µ—Ç–æ–¥–æ–º **get_funding_info** (funding_rate + next_funding_time); –ø—Ä–∏ –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **get_funding_rate** (—Ç–æ–≥–¥–∞ `minutes_until` –±—É–¥–µ—Ç None –∏ –≤ Telegram –ø–æ —ç—Ç–æ–π –ø–∞—Ä–µ –Ω–µ –ø–æ–ø–∞–¥—ë—Ç).

### –ó–∞–ø—É—Å–∫

```bash
python3 scan_fundings_spreads.py
```

–¶–∏–∫–ª: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–æ–Ω–µ—Ç ‚Üí `scan_once` –ø–æ –±–∞—Ç—á–∞–º ‚Üí –ø–∞—É–∑–∞ **SCAN_FUNDING_INTERVAL_SEC** —Å–µ–∫—É–Ω–¥.

---

## 3. –ë–æ—Ç scan_fundings_spreads_bot.py (–æ—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–¥–Ω–æ–π –ø–∞—Ä—ã)

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –±–æ—Ç –¥–ª—è **–æ–¥–Ω–æ–π** –ø–∞—Ä—ã Long/Short: –≤–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏ (–º–æ–Ω–µ—Ç–∞, Long –±–∏—Ä–∂–∞, Short –±–∏—Ä–∂–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) ‚Üí –∞–Ω–∞–ª–∏–∑ ‚Üí –≤–æ–ø—Ä–æ—Å—ã ‚Üí –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ ¬´–î–∞¬ª –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏/–∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Üí –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –ø–æ—Ä–æ–≥—É –∏–ª–∏ –ø–æ CTRL+Z (Windows: Ctrl+Z –∏ Enter). –õ–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –≤ **position_opener**, –∞–Ω–∞–ª–∏–∑ –∏ –¥–∞–Ω–Ω—ã–µ ‚Äî **bot.py**.

### –í–≤–æ–¥

- –°—Ç—Ä–æ–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `"STO Long (mexc), Short (bybit) 30"` (–º–æ–Ω–µ—Ç–∞, Long –±–∏—Ä–∂–∞, Short –±–∏—Ä–∂–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç).
- –ü–∞—Ä—Å–∏–Ω–≥: **input_parser.parse_input** (—Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç, —á—Ç–æ –≤ bot.py).

### –í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã

1. **¬´–û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –≤ –ª–æ–Ω–≥ –∏ —à–æ—Ä—Ç?¬ª**  
   –ú–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–æ—Å—Ç–æ **¬´–î–∞¬ª** –∏–ª–∏ **¬´–î–∞, X¬ª** (X ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –∑–∞–∫—Ä—ã—Ç–∏—è –≤ %, –Ω–∞–ø—Ä–∏–º–µ—Ä 1 –∏–ª–∏ 0.5).  
   - ¬´–î–∞¬ª –±–µ–∑ —á–∏—Å–ª–∞ ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –ø–æ—Ä–æ–≥–∞ –∑–∞–∫—Ä—ã—Ç–∏—è.  
   - ¬´–ù–µ—Ç¬ª ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤–æ–ø—Ä–æ—Å—É 2.

2. **¬´–í–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥?¬ª** (–µ—Å–ª–∏ –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å –æ—Ç–≤–µ—Ç–∏–ª–∏ ¬´–ù–µ—Ç¬ª)  
   ¬´–î–∞¬ª –∏–ª–∏ ¬´–î–∞, X¬ª ‚Äî –∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π PNL). –ü–æ—Ä–æ–≥ X –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω; –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –ø–æ—Ä–æ–≥–∞.

### –û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (position_opener)

- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é:** –¥–æ–ø—É—Å—Ç–∏–º–æ —á–∞—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ **–Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –æ—Ä–¥–µ—Ä–∞–º–∏**; –≤–∞–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å –≤–µ—Å—å –æ–±—ä—ë–º.
- **–†–µ–∂–∏–º:** –ª–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ **IOC** (Immediate-Or-Cancel). –ò–¥—ë–º —Å **–ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è** —Å—Ç–∞–∫–∞–Ω–∞: –æ—Ä–¥–µ—Ä –ø–æ —Ü–µ–Ω–µ —É—Ä–æ–≤–Ω—è 1 –Ω–∞ –≤–µ—Å—å –æ–±—ä—ë–º (–∏–ª–∏ –æ—Å—Ç–∞—Ç–æ–∫), –∑–∞—Ç–µ–º –ø—Ä–∏ –Ω–µ–ø–æ–ª–Ω–æ–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ ‚Äî —É—Ä–æ–≤–µ–Ω—å 2 –∏ —Ç.–¥.
- **–ì–ª—É–±–∏–Ω–∞ —Å—Ç–∞–∫–∞–Ω–∞:** **OPEN_ORDERBOOK_LEVELS** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **5**). –£—Ä–æ–≤–Ω–∏ 1..5; –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ IOC –¥–æ –Ω–∞–±–æ—Ä–∞ –æ–±—ä—ë–º–∞.
- **–¶–µ–Ω—ã:** Long ‚Äî –ø–æ ask, Short ‚Äî –ø–æ bid. –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø–æ tick: –¥–ª—è buy ‚Äî –≤–≤–µ—Ä—Ö (ceil), –¥–ª—è sell ‚Äî –≤–Ω–∏–∑ (floor), —á—Ç–æ–±—ã –ª–∏–º–∏—Ç –±—ã–ª ¬´–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–µ–µ¬ª –ª—É—á—à–µ–π —Ü–µ–Ω—ã –∏ –º–æ–≥ –∏—Å–ø–æ–ª–Ω–∏—Ç—å—Å—è.
- **–ö–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏:** –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —Å –±–∏—Ä–∂ (–∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è); –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ‚Äî –≤ –ª–æ–≥ –∏ –≤ PNL –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è N/A (–æ—Ü–µ–Ω–∫–∏ –Ω–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è). –î–ª—è —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Å–¥–µ–ª–æ–∫ ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ 0.05 USDT –Ω–∞ –±–∏—Ä–∂—É.

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥

- –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ ~1 —Å. –§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–∏–º–µ—Ä):
  - `2026-02-04 18:57:40,709 üö© –°–ø—Ä–µ–¥ –∑–∞–∫: -0.02% ‚õ≥ –û—Ç–∫: -0.05% (L: 0.28244, S: 0.28236) üí∞ –§–∞–Ω–¥: -0.03% (L: -0.25% 58 –º | S: -0.22% 58 –º) üéØ –û–±—â: -0.05 üí≤ PNL: -0.10 USDT | –§–∞–Ω–¥ L: _ | S: _ ‚öôÔ∏è L bybit S bingx | SENT`
- **–°–ø—Ä–µ–¥ –∑–∞–∫** ‚Äî —Å–ø—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Ç–µ–∫—É—â–∏–º —Ü–µ–Ω–∞–º. **–û—Ç–∫** ‚Äî —Å–ø—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏—è; –≤ —Å–∫–æ–±–∫–∞—Ö —Ü–µ–Ω—ã –æ—Ç–∫—Ä—ã—Ç–∏—è Long –∏ Short (5 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π), **–æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ** –Ω–∞ –≤—Å—ë–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ (–ø—Ä–∏ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Å–¥–µ–ª–∫–∞—Ö ‚Äî —Ü–µ–Ω—ã –Ω–∞ —Å—Ç–∞—Ä—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞).
- **–§–∞–Ω–¥** ‚Äî —Å–ø—Ä–µ–¥ —Ñ–∞–Ω–¥–∏–Ω–≥–∞; –≤ —Å–∫–æ–±–∫–∞—Ö —Å—Ç–∞–≤–∫–∏ –∏ –º–∏–Ω—É—Ç—ã –¥–æ –≤—ã–ø–ª–∞—Ç—ã –ø–æ Long –∏ Short. **üí≤ PNL** ‚Äî PNL –≤ USDT (—Å–º. –Ω–∏–∂–µ). **–§–∞–Ω–¥ L / S** ‚Äî –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π —Ñ–∞–Ω–¥–∏–Ω–≥ –≤ USDT –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω–µ (–∏–ª–∏ N/A –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö).
- –í –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏: **‚öôÔ∏è L {–±–∏—Ä–∂–∞ Long} S {–±–∏—Ä–∂–∞ Short} | {–º–æ–Ω–µ—Ç–∞}**.

### –†–∞—Å—á—ë—Ç PNL

- **–ë–∞–∑–∞:** –¥–æ—Ö–æ–¥/—É–±—ã—Ç–æ–∫ –æ—Ç —Ü–µ–Ω (Long: —Ç–µ–∫—É—â–∞—è bid ‚àí —Ü–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è; Short: —Ü–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è ‚àí —Ç–µ–∫—É—â–∞—è ask) √ó –æ–±—ä—ë–º, –º–∏–Ω—É—Å –∫–æ–º–∏—Å—Å–∏–∏.
- **–ö–æ–º–∏—Å—Å–∏–∏:** —Ä–µ–∞–ª—å–Ω—ã–µ ‚Äî –∏–∑ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–π —Å –±–∏—Ä–∂; –ø—Ä–∏ None ‚Äî –≤ PNL –Ω–µ –≤—Ö–æ–¥—è—Ç, –≤ –ª–æ–≥–µ N/A. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ ‚Äî 0.05 USDT –Ω–∞ –±–∏—Ä–∂—É.
- **–§–∞–Ω–¥–∏–Ω–≥:**  
  - **–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏:** –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∏—Ä–∂–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä Bybit ‚Äî –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π). –ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ —Å—Ç–æ—Ä–æ–Ω–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Äî –≤ PNL —Ñ–∞–Ω–¥–∏–Ω–≥ –Ω–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º, –≤ –ª–æ–≥–µ ¬´–§–∞–Ω–¥ L: N/A | S: N/A¬ª.  
  - **–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ:** —Ñ–∞–Ω–¥–∏–Ω–≥ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª–Ω–æ–≥–æ —á–∞—Å–∞**. –í –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–Ω—É—Ç—É —á–∞—Å–∞ (–ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º) –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Å—Ç–∞–≤–∫–∞ —Ñ–∞–Ω–¥–∏–Ω–≥–∞; –ø–æ –Ω–µ–π —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–ø–ª–∞—Ç–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞ —ç—Ç–æ—Ç —á–∞—Å. –ï—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ –Ω–µ –ø–æ–ª—É—á–µ–Ω–∞ (None) ‚Äî –Ω–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º 0, –¥–ª—è —ç—Ç–æ–≥–æ —á–∞—Å–∞ —Ñ–∞–Ω–¥–∏–Ω–≥ –≤ PNL –Ω–µ –≤—Ö–æ–¥–∏—Ç. –û—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –ª–æ–≥–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è ¬´–§–∞–Ω–¥–∏–Ω–≥ –ø–æ–ª—É—á–µ–Ω–æ: X USDT | —É–ø–ª–∞—á–µ–Ω–æ: Y USDT¬ª –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

–ù–∏–∫–∞–∫–∏—Ö fallback-–æ—Ü–µ–Ω–æ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö: —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç –∏–ª–∏ N/A.

### –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π

- **–ü–æ –ø–æ—Ä–æ–≥—É:** –ø—Ä–∏ **|–°–ø—Ä–µ–¥ –∑–∞–∫—Ä| ‚â§ X** (–µ—Å–ª–∏ X –∑–∞–¥–∞–Ω) ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram, –∑–∞—Ç–µ–º **close_long_short_positions** –∏ –≤—ã—Ö–æ–¥.
- **–ü–æ CTRL+Z:** –Ω–∞ Windows ‚Äî **Ctrl+Z** –∏ **Enter** –≤ –∫–æ–Ω—Å–æ–ª–∏ (EOF); –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ñ–ª–∞–≥ –∑–∞–∫—Ä—ã—Ç–∏—è, –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è, –∑–∞—Ç–µ–º –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. **CTRL+C** ‚Äî —Ç–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–≥–∞, –ø–æ–∑–∏—Ü–∏–∏ **–Ω–µ** –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è.
- **–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è (–ø–æ –ø–æ—Ä–æ–≥—É –∏–ª–∏ CTRL+Z):** –≤ –ª–æ–≥ –≤—ã–≤–æ–¥—è—Ç—Å—è —Ü–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è Long/Short (5 –∑–Ω–∞–∫–æ–≤), L –¥–æ—Ö–æ–¥ / S –¥–æ—Ö–æ–¥, L –∫–æ–º–∏—Å—Å–∏—è –∑–∞–∫—Ä / S –∫–æ–º–∏—Å—Å–∏—è –∑–∞–∫—Ä, üí≤ –§–∏–Ω–∞–ª—å–Ω—ã–π PNL, –§–∞–Ω–¥ L / S –∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ ‚Äî ¬´–§–∞–Ω–¥–∏–Ω–≥ –ø–æ–ª—É—á–µ–Ω–æ / —É–ø–ª–∞—á–µ–Ω–æ¬ª.

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **bot.PerpArbitrageBot** ‚Äî process_input, get_futures_data, get_funding_info –∏ –¥—Ä.
- **input_parser.parse_input** ‚Äî —Ä–∞–∑–±–æ—Ä —Å—Ç—Ä–æ–∫–∏.
- **position_opener** ‚Äî open_long_short_positions, close_long_short_positions (IOC –ø–æ —É—Ä–æ–≤–Ω—è–º, 5 —É—Ä–æ–≤–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
- **telegram_sender**, **config** ‚Äî –∫–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
- **fun** ‚Äî –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–¥–µ–ª–∫–∞—Ö –∑–∞–ø—Ä–æ—Å—ã –∫–æ–º–∏—Å—Å–∏–π/—Ñ–∞–Ω–¥–∏–Ω–≥–∞ —Å –±–∏—Ä–∂ (–Ω–∞–ø—Ä–∏–º–µ—Ä Bybit).

### –ó–∞–ø—É—Å–∫

```bash
python scan_fundings_spreads_bot.py "STO Long (mexc), Short (bybit) 30"
```

–û–¥–∏–Ω –∑–∞–ø—É—Å–∫ = –æ–¥–Ω–∞ –ø–∞—Ä–∞: –∞–Ω–∞–ª–∏–∑ ‚Üí –≤–æ–ø—Ä–æ—Å—ã ‚Üí –ø—Ä–∏ ¬´–î–∞¬ª –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–∏–ª–∏ —Ç–æ–ª—å–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏ ¬´–ù–µ—Ç¬ª –∑–∞—Ç–µ–º ¬´–î–∞¬ª –Ω–∞ –≤—Ç–æ—Ä–æ–π –≤–æ–ø—Ä–æ—Å) ‚Üí –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –ø–æ—Ä–æ–≥—É –∏–ª–∏ –ø–æ CTRL+Z.
